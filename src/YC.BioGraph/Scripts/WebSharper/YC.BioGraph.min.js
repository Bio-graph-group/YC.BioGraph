(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;$.Define($$,{YC:{BioGraph:{Client:{ChooseDefaultControl:function(r){var s;s=b.Do();return s.Delay(function(){var u,v,w,x,y,z;u=c.Select(0,r);v=d.WithTextLabel("Choose default",u);w=g.getFormSize(30,210);x=w[0];y=w[1];z=g.setFormSize(x,y,"select",v);return s.Bind(d.WithFormContainer(z),function(A){return s.Return(A);});});},FileControl:$.Field(function(){return b.OfElement(function(){var C;C=h.ofArray([k.Attr().NewAttr("type","file")]);return l.Tags().NewTag("input",C);});}),InputControl:function(D,E){var F,G,R;F=b.Do();G=F.Delay(function(){var I,J,K,L,M,N;I=c.TextArea("");J=d.WithTextLabel(D,I);K=d.WithLabelAbove(J);L=g.getFormSize(85,500);M=L[0];N=L[1];return F.Bind(g.setFormSize(M,N,"textarea",K),function(O){return F.Bind(g.FileControl(),function(P){return F.Bind(g.ChooseDefaultControl(E),function(Q){return F.Return([O,P,Q]);});});});});R=b.Vertical(G);return d.WithFormContainer(R);},Main:function(){var S;S=h.ofArray([g.frm().Run(function(){return null;})]);return l.Tags().NewTag("div",S);},OutputControl:$.Field(function(){var U,V;U=b.Do();V=U.Delay(function(){var X,Y,Z,_0,_1,_2;X=c.ReadOnlyTextArea("");Y=d.WithTextLabel("Output",X);Z=d.WithLabelAbove(Y);_0=g.getFormSize(85,500);_1=_0[0];_2=_0[1];return U.Bind(g.setFormSize(_1,_2,"textarea",Z),function(_3){var _4,_5;_4=c.Checkbox(false);_5=d.WithTextLabel("wrap",_4);return U.Bind(d.WithLabelLeft(_5),function(_6){return U.Return([_6,_3]);});});});return d.WithFormContainer(V);}),RangeControl:$.Field(function(){var _7,_8,bl,bm,bn;_7=b.Do();_8=_7.Delay(function(){var _,ba,bb,bc,bd;_=c.Input("");ba=d.WithTextLabel("from",_);bb=g.getFormSize(30,210);bc=bb[0];bd=bb[1];return _7.Bind(g.setFormSize(bc,bd,"input",ba),function(be){var bf,bg,bh,bi,bj;bf=c.Input("");bg=d.WithTextLabel("to",bf);bh=g.getFormSize(30,210);bi=bh[0];bj=bh[1];return _7.Bind(g.setFormSize(bi,bj,"input",bg),function(bk){return _7.Return([be<<0,bk<<0]);});});});bl=b.Horizontal(_8);bm=d.WithTextLabel("String range",bl);bn=d.WithLabelAbove(bm);return d.WithFormContainer(bn);}),ShowImageControl:$.Field(function(){var bn,br,bs;bn=b.OfElement(function(){var bp,bq;bp="height: "+(g.getFormSize(315,315))[0]+"; width: "+(g.getFormSize(315,315))[0];bq=h.ofArray([k.Attr().NewAttr("style",bp),k.Attr().NewAttr("src","graph(kindof).jpg")]);return l.Tags().NewTag("img",bq);});br=d.WithTextLabel("Graph visualisation",bn);bs=d.WithLabelAbove(br);return d.WithFormContainer(bs);}),frm:$.Field(function(){var bt,bu,bJ,bK,bL,bP,bQ,bR,bS,bW,bX,bY;bt=b.Do();bu=bt.Delay(function(){var bw,by;bw=function(bx){return[bx,""];};by=n.Sync("YC.BioGraph:1",[{$:1}]);return bt.Bind(g.InputControl("Grammar",h.map(bw,by)),function(bz){var bA,bC;bA=function(bB){return[bB,""];};bC=n.Sync("YC.BioGraph:1",[{$:0}]);return bt.Bind(g.InputControl("Graph",h.map(bA,bC)),function(bD){return bt.Bind(g.RangeControl(),function(bE){var bF,bG,bH;bF=c.Checkbox(false);bG=d.WithTextLabel("DRAW GRAPH",bF);bH=d.WithLabelLeft(bG);return bt.Bind(d.WithFormContainer(bH),function(bI){return bt.Return([bz,bD,bE,bI]);});});});});});bJ=b.Vertical(bu);bK=b.Do();bL=bK.Delay(function(){return bK.Bind(g.ShowImageControl(),function(bN){return bK.Bind(g.OutputControl(),function(bO){return bK.Return([bN,bO]);});});});bP=b.Vertical(bL);bQ="background-color: #FF1493; border-width: 3px; border-color: #000000; height: "+(g.getFormSize(40,80))[0]+"; width: "+(g.getFormSize(40,80))[1]+"; font-size:"+(g.getFormSize(30,80))[0];bR=b.Do();bS=bR.Delay(function(){return bR.Bind(bJ,function(bU){return bR.Bind(bP,function(bV){return bR.Return([bU,bV]);});});});bW=b.Horizontal(bS);bX=o.get_Default();bY=$.New(o,{Label:{$:1,$0:"GO"},Style:{$:1,$0:bQ},Class:bX.Class});return d.WithCustomSubmitButton(bY,bW);}),getFormSize:function(bZ,b0){var b1,b2;b1=bZ*g.screenHeight()/648>>0;b2=b0*g.screenWidth()/1366>>0;return[p(b1)+"px",p(b2)+"px"];},screenHeight:$.Field(function(){return q("html").height();}),screenWidth:$.Field(function(){return q("html").width();}),setFormSize:function(b3,b4,b5,b6){var b7;b7=function(b8){q(b8.Dom.querySelector(b5)).css("height",b3).css("width",b4);return b8;};return b.MapElement(b7,b6);}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Formlets);b=$.Safe(a.Formlet);c=$.Safe(a.Controls);d=$.Safe(a.Enhance);e=$.Safe($$.YC);f=$.Safe(e.BioGraph);g=$.Safe(f.Client);h=$.Safe($$.WebSharper.List);i=$.Safe($$.WebSharper.Html);j=$.Safe(i.Client);k=$.Safe(j.Attr);l=$.Safe(j.Tags);m=$.Safe($$.WebSharper.Remoting);n=$.Safe(m.AjaxRemotingProvider);o=$.Safe(d.FormButtonConfiguration);p=$.Safe($$.String);return q=$.Safe($$.jQuery);});$.OnLoad(function(){g.screenWidth();g.screenHeight();g.frm();g.ShowImageControl();g.RangeControl();g.OutputControl();g.FileControl();return;});}());
