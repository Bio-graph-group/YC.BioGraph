(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;$.Define($$,{YC:{BioGraph:{Client:{ChooseDefaultControl:function(E){var F;F=b.Do();return F.Delay(function(){var H,I,J,K,L,M;H=c.Select(0,E);I=d.WithTextLabel("Choose default",H);J=g.getFormSize(30,210);K=J[0];L=J[1];M=g.setFormSize(K,L,"select",I);return F.Bind(d.WithFormContainer(M),function(N){return F.Return(N);});});},FileControl:$.Field(function(){var O,R,_2;O=function(P){var Q;Q=new h();Q.readAsText(P);while(!i.Equals(Q.readyState,2)){}return Q.result;};R=function(){var T,U,V,W,Z,_0;T=k.New();U=l.ofArray([o.Attr().NewAttr("type","file"),o.Attr().NewAttr("accept","text/*")]);V=p.Tags().NewTag("input",U);W=function(X){return function(){return T.event.Trigger($.New(t,{$:0,$0:O(new u("[ '"+X.get_Value()+"' ]"))}));};};v.Events().OnChange(W,V);Z=V;_0=function(){Z.set_Value("");return T.event.Trigger($.New(t,{$:0,$0:""}));};return[Z,_0,T.event];};_2=b.BuildFormlet(R);return b.InitWith("",_2);}),InputControl:function(_3,_4){var _5,_6,bi,bj;_5=b.Do();_6=_5.Delay(function(){var _8;_8=b.Do();return _5.Bind(_8.Delay(function(){return _8.Bind(g.FileControl(),function(_){return _8.ReturnFrom(g.ChooseDefaultControl($.New(w,{$:1,$0:["",_],$1:_4})));});}),function(ba){var bb,bc,bd,be,bf,bg;bb=c.TextArea(ba);bc=d.WithTextLabel(_3,bb);bd=d.WithLabelAbove(bc);be=g.getFormSize(85,500);bf=be[0];bg=be[1];return _5.Bind(g.setFormSize(bf,bg,"textarea",bd),function(bh){return _5.Return(bh);});});});bi=b.FlipBody(_6);bj=b.Vertical(bi);return d.WithFormContainer(bj);},Main:function(){var bj;bj=l.ofArray([g.frm().Run(function(){return null;})]);return p.Tags().NewTag("div",bj);},OutputControl:function(bl){var bm,bn,bC;bm=b.Do();bn=bm.Delay(function(){var bp,bq;bp=c.Checkbox(false);bq=d.WithTextLabel("wrap",bp);return bm.Bind(d.WithLabelLeft(bq),function(br){var bs,bt,bw,bx,by,bz,bA;bs=br?"soft":"off";bt=b.OfElement(function(){var bv;bv=l.ofArray([o.Attr().NewAttr("readonly","readonly"),o.Attr().NewAttr("wrap",bs),p.Tags().text(bl)]);return p.Tags().NewTag("textarea",bv);});bw=d.WithTextLabel("Output",bt);bx=d.WithLabelAbove(bw);by=g.getFormSize(85,500);bz=by[0];bA=by[1];return bm.Bind(g.setFormSize(bz,bA,"textarea",bx),function(bB){return bm.Return(bB);});});});bC=d.WithFormContainer(bn);return b.FlipBody(bC);},RangeControl:$.Field(function(){var bD,bG,bO,bW,bX,bY;bG=b.Do();bO=b.Do();bD=x.$(x.$(b.Return(function(bE){return function(bF){return[bE<<0,bF<<0];};}),bG.Delay(function(){var bI,bJ,bK,bL,bM;bI=c.Input("");bJ=d.WithTextLabel("from",bI);bK=g.getFormSize(30,210);bL=bK[0];bM=bK[1];return bG.Bind(g.setFormSize(bL,bM,"input",bJ),function(bN){return bG.Return(bN);});})),bO.Delay(function(){var bQ,bR,bS,bT,bU;bQ=c.Input("");bR=d.WithTextLabel("to",bQ);bS=g.getFormSize(30,210);bT=bS[0];bU=bS[1];return bO.Bind(g.setFormSize(bT,bU,"input",bR),function(bV){return bO.Return(bV);});}));bW=b.Horizontal(bD);bX=d.WithTextLabel("String range",bW);bY=d.WithLabelAbove(bX);return d.WithFormContainer(bY);}),ShowImageControl:$.Field(function(){var bZ,b3,b4;bZ=b.OfElement(function(){var b1,b2;b1="height: "+(g.getFormSize(355,355))[0]+"; width: "+(g.getFormSize(355,355))[0];b2=l.ofArray([o.Attr().NewAttr("style",b1),o.Attr().NewAttr("src","graph(kindof).jpg")]);return p.Tags().NewTag("img",b2);});b3=d.WithTextLabel("Graph visualisation",bZ);b4=d.WithLabelAbove(b3);return d.WithFormContainer(b4);}),frm:$.Field(function(){var b5,b6,b$,cb,cc,ce,cf,cg,ch,ci,cj,ck,cl,cm,cE,cF;b5="background-color: #FF1493; border-width: 3px; border-color: #000000; height: "+(g.getFormSize(40,80))[0]+"; width: "+(g.getFormSize(40,80))[1]+"; font-size:"+(g.getFormSize(30,80))[0];b$=function(ca){return[ca,z.Sync("YC.BioGraph:3",[{$:1},ca])];};cb=z.Sync("YC.BioGraph:2",[{$:1}]);cc=function(cd){return[cd,z.Sync("YC.BioGraph:3",[{$:0},cd])];};ce=z.Sync("YC.BioGraph:2",[{$:0}]);cf=c.Checkbox(false);cg=d.WithTextLabel("DRAW GRAPH",cf);ch=d.WithLabelLeft(cg);b6=x.$(x.$(x.$(x.$(b.Return(function(b7){return function(b8){return function(b9){return function(b_){return[b7,b8,b9,b_];};};};}),g.InputControl("Grammar",l.map(b$,cb))),g.InputControl("Graph",l.map(cc,ce))),g.RangeControl()),d.WithFormContainer(ch));ci=A.get_Default();cj=$.New(A,{Label:{$:1,$0:"GO"},Style:{$:1,$0:b5},Class:ci.Class});ck=d.WithCustomSubmitButton(cj,b6);cl=b.Vertical(ck);cm=function(cn){var co,cp,cq,cr,cs,ct;co=cn[0];cp=cn[1];cq=cn[2];cr=cn[3];cs=b.Do();ct=cs.Delay(function(){var cv,cw,cx,cy,cz,cA,cB;cv=cq[0];cw=cq[1];cx=z.Sync("YC.BioGraph:4",[co,cp,cv,cw,cr]);if(cx.$==1){cA=cx.$1;cx.$0;cz=B.Join("/n",cA);}else{cB=cx.$0;cz=cB;}cy=cz;return cs.Bind(g.ShowImageControl(),function(){return cs.Bind(g.OutputControl(cy),function(cD){return cs.Return(cD);});});});return b.Vertical(ct);};cE=b.Do();cF=cE.Delay(function(){return cE.Bind(cl,function(cH){return cE.Bind(cm(cH),function(cI){return cE.Return([cH,cI]);});});});return b.Horizontal(cF);}),getFormSize:function(cJ,cK){var cL,cM;cL=cJ*g.screenHeight()/648>>0;cM=cK*g.screenWidth()/1366>>0;return[C(cL)+"px",C(cM)+"px"];},screenHeight:$.Field(function(){return D("html").height();}),screenWidth:$.Field(function(){return D("html").width();}),setFormSize:function(cN,cO,cP,cQ){var cR;cR=function(cS){D(cS.Dom.querySelector(cP)).css("height",cN).css("width",cO);return cS;};return b.MapElement(cR,cQ);}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Formlets);b=$.Safe(a.Formlet);c=$.Safe(a.Controls);d=$.Safe(a.Enhance);e=$.Safe($$.YC);f=$.Safe(e.BioGraph);g=$.Safe(f.Client);h=$.Safe($$.FileReader);i=$.Safe($$.WebSharper.Unchecked);j=$.Safe($$.WebSharper.Control);k=$.Safe(j.FSharpEvent);l=$.Safe($$.WebSharper.List);m=$.Safe($$.WebSharper.Html);n=$.Safe(m.Client);o=$.Safe(n.Attr);p=$.Safe(n.Tags);q=$.Safe($$.IntelliFactory);r=$.Safe(q.Formlets);s=$.Safe(r.Base);t=$.Safe(s.Result);u=$.Safe($$.Blob);v=$.Safe(n.EventsPervasives);w=$.Safe(l.T);x=$.Safe(a.Data);y=$.Safe($$.WebSharper.Remoting);z=$.Safe(y.AjaxRemotingProvider);A=$.Safe(d.FormButtonConfiguration);B=$.Safe($$.WebSharper.Strings);C=$.Safe($$.String);return D=$.Safe($$.jQuery);});$.OnLoad(function(){g.screenWidth();g.screenHeight();g.frm();g.ShowImageControl();g.RangeControl();g.FileControl();return;});}());
