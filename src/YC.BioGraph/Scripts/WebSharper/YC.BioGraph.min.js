(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;$.Define($$,{YC:{BioGraph:{Client:{ChooseDefaultControl:function(t){var u;u=b.Do();return u.Delay(function(){var w,x,y,z,A,B;w=c.Select(0,t);x=d.WithTextLabel("Choose default",w);y=g.getFormSize(30,210);z=y[0];A=y[1];B=g.setFormSize(z,A,"select",x);return u.Bind(d.WithFormContainer(B),function(C){return u.Return(C);});});},FileControl:$.Field(function(){var D,F;D=function(){return"";};F=b.OfElement(function(){var H;H=h.ofArray([k.Attr().NewAttr("type","file")]);return l.Tags().NewTag("input",H);});return b.Map(D,F);}),InputControl:function(I,J){var K,L,Y,Z;K=b.Do();L=K.Delay(function(){var N;N=b.Do();return K.Bind(N.Delay(function(){return N.Bind(g.FileControl(),function(P){return N.ReturnFrom(g.ChooseDefaultControl($.New(m,{$:1,$0:["",P],$1:J})));});}),function(Q){var R,S,T,U,V,W;R=c.TextArea(Q);S=d.WithTextLabel(I,R);T=d.WithLabelAbove(S);U=g.getFormSize(85,500);V=U[0];W=U[1];return K.Bind(g.setFormSize(V,W,"textarea",T),function(X){return K.Return(X);});});});Y=b.FlipBody(L);Z=b.Vertical(Y);return d.WithFormContainer(Z);},Main:function(){var _0;_0=h.ofArray([g.frm().Run(function(){return null;})]);return l.Tags().NewTag("div",_0);},OutputControl:function(_2,_3,_4,_5){var _6,_7;_6=b.Do();_7=_6.Delay(function(){var _9,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj;_9=_4[0];_=_4[1];ba=o.Sync("YC.BioGraph:3",[_2,_3,_9,_,_5]);if(ba.$==0){bd=ba.$0;bc=bd;}else{bc="oK";}bb=bc;be=c.ReadOnlyTextArea(bb);bf=d.WithTextLabel("Output",be);bg=d.WithLabelAbove(bf);bh=g.getFormSize(85,500);bi=bh[0];bj=bh[1];return _6.Bind(g.setFormSize(bi,bj,"textarea",bg),function(bk){var bl,bm;bl=c.Checkbox(false);bm=d.WithTextLabel("wrap",bl);return _6.Bind(d.WithLabelLeft(bm),function(){return _6.Return(bk);});});});return d.WithFormContainer(_7);},RangeControl:$.Field(function(){var bn,bq,by,bG,bH,bI;bq=b.Do();by=b.Do();bn=p.$(p.$(b.Return(function(bo){return function(bp){return[bo<<0,bp<<0];};}),bq.Delay(function(){var bs,bt,bu,bv,bw;bs=c.ReadOnlyInput("0");bt=d.WithTextLabel("from",bs);bu=g.getFormSize(30,210);bv=bu[0];bw=bu[1];return bq.Bind(g.setFormSize(bv,bw,"input",bt),function(bx){return bq.Return(bx);});})),by.Delay(function(){var bA,bB,bC,bD,bE;bA=c.ReadOnlyInput("0");bB=d.WithTextLabel("to",bA);bC=g.getFormSize(30,210);bD=bC[0];bE=bC[1];return by.Bind(g.setFormSize(bD,bE,"input",bB),function(bF){return by.Return(bF);});}));bG=b.Horizontal(bn);bH=d.WithTextLabel("String range",bG);bI=d.WithLabelAbove(bH);return d.WithFormContainer(bI);}),ShowImageControl:$.Field(function(){var bJ,bN,bO;bJ=b.OfElement(function(){var bL,bM;bL="height: "+(g.getFormSize(315,315))[0]+"; width: "+(g.getFormSize(315,315))[0];bM=h.ofArray([k.Attr().NewAttr("style",bL),k.Attr().NewAttr("src","graph(kindof).jpg")]);return l.Tags().NewTag("img",bM);});bN=d.WithTextLabel("Graph visualisation",bJ);bO=d.WithLabelAbove(bN);return d.WithFormContainer(bO);}),frm:$.Field(function(){var bP,bU,bW,bX,bZ,b0,b1,b2,b3,b4,cd,ce,cf,cj,ck,cl;bU=function(bV){return[bV,o.Sync("YC.BioGraph:2",[{$:1},bV])];};bW=o.Sync("YC.BioGraph:1",[{$:1}]);bX=function(bY){return[bY,o.Sync("YC.BioGraph:2",[{$:0},bY])];};bZ=o.Sync("YC.BioGraph:1",[{$:0}]);b0=c.Checkbox(false);b1=d.WithTextLabel("DRAW GRAPH",b0);b2=d.WithLabelLeft(b1);bP=p.$(p.$(p.$(p.$(b.Return(function(bQ){return function(bR){return function(bS){return function(bT){return[bQ,bR,bS,bT];};};};}),g.InputControl("Grammar",h.map(bU,bW))),g.InputControl("Graph",h.map(bX,bZ))),g.RangeControl()),d.WithFormContainer(b2));b3=b.Vertical(bP);b4=function(b5){var b6,b7;b6=b.Do();b7=b6.Delay(function(){return b6.Bind(g.ShowImageControl(),function(b9){var b_,b$,ca,cb;b_=b5[0];b$=b5[1];ca=b5[2];cb=b5[3];return b6.Bind(g.OutputControl(b_,b$,ca,cb),function(cc){return b6.Return([b9,cc]);});});});return b.Vertical(b7);};cd="background-color: #FF1493; border-width: 3px; border-color: #000000; height: "+(g.getFormSize(40,80))[0]+"; width: "+(g.getFormSize(40,80))[1]+"; font-size:"+(g.getFormSize(30,80))[0];ce=b.Do();cf=ce.Delay(function(){return ce.Bind(b3,function(ch){return ce.Bind(b4(ch),function(ci){return ce.Return([ch,ci]);});});});cj=b.Horizontal(cf);ck=q.get_Default();cl=$.New(q,{Label:{$:1,$0:"GO"},Style:{$:1,$0:cd},Class:ck.Class});return d.WithCustomSubmitButton(cl,cj);}),getFormSize:function(cm,cn){var co,cp;co=cm*g.screenHeight()/648>>0;cp=cn*g.screenWidth()/1366>>0;return[r(co)+"px",r(cp)+"px"];},screenHeight:$.Field(function(){return s("html").height();}),screenWidth:$.Field(function(){return s("html").width();}),setFormSize:function(cq,cr,cs,ct){var cu;cu=function(cv){s(cv.Dom.querySelector(cs)).css("height",cq).css("width",cr);return cv;};return b.MapElement(cu,ct);}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Formlets);b=$.Safe(a.Formlet);c=$.Safe(a.Controls);d=$.Safe(a.Enhance);e=$.Safe($$.YC);f=$.Safe(e.BioGraph);g=$.Safe(f.Client);h=$.Safe($$.WebSharper.List);i=$.Safe($$.WebSharper.Html);j=$.Safe(i.Client);k=$.Safe(j.Attr);l=$.Safe(j.Tags);m=$.Safe(h.T);n=$.Safe($$.WebSharper.Remoting);o=$.Safe(n.AjaxRemotingProvider);p=$.Safe(a.Data);q=$.Safe(d.FormButtonConfiguration);r=$.Safe($$.String);return s=$.Safe($$.jQuery);});$.OnLoad(function(){g.screenWidth();g.screenHeight();g.frm();g.ShowImageControl();g.RangeControl();g.FileControl();return;});}());
