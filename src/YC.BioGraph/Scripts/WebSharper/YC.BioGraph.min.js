(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;$.Define($$,{YC:{BioGraph:{Client:{ChooseDefaultControl:function(s){var t;t=b.Do();return t.Delay(function(){var v,w,x,y,z,A;v=c.Select(0,s);w=d.WithTextLabel("Choose default",v);x=g.getFormSize(30,210);y=x[0];z=x[1];A=g.setFormSize(y,z,"select",w);return t.Bind(d.WithFormContainer(A),function(B){return t.Return(B);});});},FileControl:$.Field(function(){var C,E;C=function(){return"";};E=b.OfElement(function(){var G;G=h.ofArray([k.Attr().NewAttr("type","file")]);return l.Tags().NewTag("input",G);});return b.Map(C,E);}),InputControl:function(H,I){var J,K,X,Y;J=b.Do();K=J.Delay(function(){var M;M=b.Do();return J.Bind(M.Delay(function(){return M.Bind(g.FileControl(),function(O){return M.ReturnFrom(g.ChooseDefaultControl($.New(m,{$:1,$0:["default",O],$1:I})));});}),function(P){var Q,R,S,T,U,V;Q=c.TextArea(P);R=d.WithTextLabel(H,Q);S=d.WithLabelAbove(R);T=g.getFormSize(85,500);U=T[0];V=T[1];return J.Bind(g.setFormSize(U,V,"textarea",S),function(W){return J.Return(W);});});});X=b.FlipBody(K);Y=b.Vertical(X);return d.WithFormContainer(Y);},Main:function(){var Z;Z=h.ofArray([g.frm().Run(function(){return null;})]);return l.Tags().NewTag("div",Z);},OutputControl:function(_1,_2,_3,_4){var _5,_6;_5=b.Do();_6=_5.Delay(function(){var _8,_9,_,ba,bb,bc,bd,be,bf,bg,bh,bi;_8=_3[0];_9=_3[1];_=o.Sync("YC.BioGraph:3",[_1,_2,_8,_9,_4]);if(_.$==0){bc=_.$0;bb=bc;}else{bb="oK";}ba=bb;bd=c.ReadOnlyTextArea(ba);be=d.WithTextLabel("Output",bd);bf=d.WithLabelAbove(be);bg=g.getFormSize(85,500);bh=bg[0];bi=bg[1];return _5.Bind(g.setFormSize(bh,bi,"textarea",bf),function(bj){var bk,bl;bk=c.Checkbox(false);bl=d.WithTextLabel("wrap",bk);return _5.Bind(d.WithLabelLeft(bl),function(){return _5.Return(bj);});});});return d.WithFormContainer(_6);},RangeControl:$.Field(function(){var bm,bn,bB,bC,bD;bm=b.Do();bn=bm.Delay(function(){var bp,bq,br,bs,bt;bp=c.Input("");bq=d.WithTextLabel("from",bp);br=g.getFormSize(30,210);bs=br[0];bt=br[1];return bm.Bind(g.setFormSize(bs,bt,"input",bq),function(bu){var bv,bw,bx,by,bz;bv=c.Input("");bw=d.WithTextLabel("to",bv);bx=g.getFormSize(30,210);by=bx[0];bz=bx[1];return bm.Bind(g.setFormSize(by,bz,"input",bw),function(bA){return bm.Return([bu<<0,bA<<0]);});});});bB=b.Horizontal(bn);bC=d.WithTextLabel("String range",bB);bD=d.WithLabelAbove(bC);return d.WithFormContainer(bD);}),ShowImageControl:$.Field(function(){var bE,bI,bJ;bE=b.OfElement(function(){var bG,bH;bG="height: "+(g.getFormSize(315,315))[0]+"; width: "+(g.getFormSize(315,315))[0];bH=h.ofArray([k.Attr().NewAttr("style",bG),k.Attr().NewAttr("src","graph(kindof).jpg")]);return l.Tags().NewTag("img",bH);});bI=d.WithTextLabel("Graph visualisation",bE);bJ=d.WithLabelAbove(bI);return d.WithFormContainer(bJ);}),frm:$.Field(function(){var bK,bP,bR,bS,bU,bV,bW,bX,bY,bZ,b_,b$,cd;bP=function(bQ){return[bQ,o.Sync("YC.BioGraph:2",[{$:1},bQ])];};bR=o.Sync("YC.BioGraph:1",[{$:1}]);bS=function(bT){return[bT,o.Sync("YC.BioGraph:2",[{$:0},bT])];};bU=o.Sync("YC.BioGraph:1",[{$:0}]);bV=c.Checkbox(false);bW=d.WithTextLabel("DRAW GRAPH",bV);bX=d.WithLabelLeft(bW);bK=p.$(p.$(p.$(p.$(b.Return(function(bL){return function(bM){return function(bN){return function(bO){return[bL,bM,bN,bO];};};};}),g.InputControl("Grammar",h.map(bP,bR))),g.InputControl("Graph",h.map(bS,bU))),g.RangeControl()),d.WithFormContainer(bX));bY=b.Vertical(bK);bZ=function(b0){var b1,b2;b1=b.Do();b2=b1.Delay(function(){return b1.Bind(g.ShowImageControl(),function(b4){var b5,b6,b7,b8;b5=b0[0];b6=b0[1];b7=b0[2];b8=b0[3];return b1.Bind(g.OutputControl(b5,b6,b7,b8),function(b9){return b1.Return([b4,b9]);});});});return b.Vertical(b2);};"background-color: #FF1493; border-width: 3px; border-color: #000000; height: "+(g.getFormSize(40,80))[0]+"; width: "+(g.getFormSize(40,80))[1]+"; font-size:"+(g.getFormSize(30,80))[0];b_=b.Do();b$=b_.Delay(function(){return b_.Bind(bY,function(cb){return b_.Bind(bZ(cb),function(cc){return b_.Return([cb,cc]);});});});cd=b.Horizontal(b$);return d.WithSubmitAndResetButtons(cd);}),getFormSize:function(ce,cf){var cg,ch;cg=ce*g.screenHeight()/648>>0;ch=cf*g.screenWidth()/1366>>0;return[q(cg)+"px",q(ch)+"px"];},screenHeight:$.Field(function(){return r("html").height();}),screenWidth:$.Field(function(){return r("html").width();}),setFormSize:function(ci,cj,ck,cl){var cm;cm=function(cn){r(cn.Dom.querySelector(ck)).css("height",ci).css("width",cj);return cn;};return b.MapElement(cm,cl);}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Formlets);b=$.Safe(a.Formlet);c=$.Safe(a.Controls);d=$.Safe(a.Enhance);e=$.Safe($$.YC);f=$.Safe(e.BioGraph);g=$.Safe(f.Client);h=$.Safe($$.WebSharper.List);i=$.Safe($$.WebSharper.Html);j=$.Safe(i.Client);k=$.Safe(j.Attr);l=$.Safe(j.Tags);m=$.Safe(h.T);n=$.Safe($$.WebSharper.Remoting);o=$.Safe(n.AjaxRemotingProvider);p=$.Safe(a.Data);q=$.Safe($$.String);return r=$.Safe($$.jQuery);});$.OnLoad(function(){g.screenWidth();g.screenHeight();g.frm();g.ShowImageControl();g.RangeControl();g.FileControl();return;});}());
